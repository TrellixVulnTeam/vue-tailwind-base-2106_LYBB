{"remainingRequest":"/home/winter/htdocs/laravel/vue-passport-santrikoding/node_modules/babel-loader/lib/index.js!/home/winter/htdocs/laravel/vue-passport-santrikoding/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/winter/htdocs/laravel/vue-passport-santrikoding/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/winter/htdocs/laravel/vue-passport-santrikoding/src/views/dashboard/Index.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/winter/htdocs/laravel/vue-passport-santrikoding/src/views/dashboard/Index.vue","mtime":1623505736895},{"path":"/home/winter/htdocs/laravel/vue-passport-santrikoding/node_modules/cache-loader/dist/cjs.js","mtime":1623053984506},{"path":"/home/winter/htdocs/laravel/vue-passport-santrikoding/node_modules/babel-loader/lib/index.js","mtime":1622940669054},{"path":"/home/winter/htdocs/laravel/vue-passport-santrikoding/node_modules/cache-loader/dist/cjs.js","mtime":1623053984506},{"path":"/home/winter/htdocs/laravel/vue-passport-santrikoding/node_modules/vue-loader-v16/dist/index.js","mtime":1623054012497}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgb25Nb3VudGVkLCByZWYgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIC8vc3RhdGUgdG9rZW4KICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOyAvL2luaXNpYWxpc2FzaSB2dWUgcm91dGVyIG9uIENvbXBvc2l0aW9uIEFQSQoKICAgIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsgLy9zdGF0ZSB1c2VyCgogICAgdmFyIHVzZXIgPSByZWYoJycpOyAvL21vdW50ZWQgcHJvcGVydGkKCiAgICBvbk1vdW50ZWQoZnVuY3Rpb24gKCkgewogICAgICAvL2NoZWNrIFRva2VuIGV4aXN0CiAgICAgIGlmICghdG9rZW4pIHsKICAgICAgICByZXR1cm4gcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogJ2xvZ2luJwogICAgICAgIH0pOwogICAgICB9IC8vZ2V0IGRhdGEgdXNlcgoKCiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSAiQmVhcmVyICIuY29uY2F0KHRva2VuKTsKICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL3VzZXInKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5uYW1lKQogICAgICAgIHVzZXIudmFsdWUgPSByZXNwb25zZS5kYXRhOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5kYXRhKTsKICAgICAgfSk7CiAgICB9KTsgLy9tZXRob2QgbG9nb3V0CgogICAgZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICAvL2xvZ291dAogICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gIkJlYXJlciAiLmNvbmNhdCh0b2tlbik7CiAgICAgIGF4aW9zLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9hcGkvbG9nb3V0JykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAvL3JlbW92ZSBsb2NhbFN0b3JhZ2UKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOyAvL3JlZGlyZWN0IGtlIGhhbGFtYW4gbG9naW4KCiAgICAgICAgICByZXR1cm4gcm91dGVyLnB1c2goewogICAgICAgICAgICBuYW1lOiAnbG9naW4nCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICB0b2tlbjogdG9rZW4sCiAgICAgIC8vIDwtLSBzdGF0ZSB0b2tlbgogICAgICB1c2VyOiB1c2VyLAogICAgICAvLyA8LS0gc3RhdGUgdXNlcgogICAgICBsb2dvdXQ6IGxvZ291dCAvLyA8LS0gbWV0aG9kIGxvZ291dAoKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["/home/winter/htdocs/laravel/vue-passport-santrikoding/src/views/dashboard/Index.vue"],"names":[],"mappings":"AAYA,SAAS,SAAT,EAAoB,GAApB,QAA+B,KAA/B;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,OAAO,KAAP,MAAkB,OAAlB;AAEI,eAAe;AAEX,EAAA,KAFW,mBAEH;AAEJ;AACA,QAAM,KAAI,GAAI,YAAY,CAAC,OAAb,CAAqB,OAArB,CAAd,CAHI,CAKJ;;AACA,QAAM,MAAK,GAAI,SAAS,EAAxB,CANI,CAQJ;;AACA,QAAM,IAAG,GAAI,GAAG,CAAC,EAAD,CAAhB,CATI,CAWJ;;AACA,IAAA,SAAS,CAAC,YAAK;AAEX;AACA,UAAG,CAAC,KAAJ,EAAW;AACP,eAAO,MAAM,CAAC,IAAP,CAAY;AACf,UAAA,IAAI,EAAE;AADS,SAAZ,CAAP;AAGJ,OAPW,CASX;;;AACA,MAAA,KAAK,CAAC,QAAN,CAAe,OAAf,CAAuB,MAAvB,CAA8B,aAA9B,oBAAwD,KAAxD;AACA,MAAA,KAAK,CAAC,GAAN,CAAU,gCAAV,EACC,IADD,CACM,UAAA,QAAO,EAAK;AAEd;AACA,QAAA,IAAI,CAAC,KAAL,GAAa,QAAQ,CAAC,IAAtB;AAEH,OAND,EAOC,KAPD,CAOO,UAAA,KAAI,EAAK;AACZ,QAAA,OAAO,CAAC,GAAR,CAAY,KAAK,CAAC,QAAN,CAAe,IAA3B;AACH,OATD;AAWH,KAtBQ,CAAT,CAZI,CAoCJ;;AACA,aAAS,MAAT,GAAkB;AAEd;AACA,MAAA,KAAK,CAAC,QAAN,CAAe,OAAf,CAAuB,MAAvB,CAA8B,aAA9B,oBAAwD,KAAxD;AACA,MAAA,KAAK,CAAC,IAAN,CAAW,kCAAX,EACC,IADD,CACM,UAAA,QAAO,EAAK;AAEd,YAAG,QAAQ,CAAC,IAAT,CAAc,OAAjB,EAA0B;AAEtB;AACA,UAAA,YAAY,CAAC,UAAb,CAAwB,OAAxB,EAHsB,CAKtB;;AACA,iBAAO,MAAM,CAAC,IAAP,CAAY;AACf,YAAA,IAAI,EAAE;AADS,WAAZ,CAAP;AAIJ;AAEH,OAfD,EAgBC,KAhBD,CAgBO,UAAA,KAAI,EAAK;AACZ,QAAA,OAAO,CAAC,GAAR,CAAY,KAAK,CAAC,QAAN,CAAe,IAA3B;AACH,OAlBD;AAoBJ;;AAEA,WAAO;AACH,MAAA,KAAK,EAAL,KADG;AACS;AACZ,MAAA,IAAI,EAAJ,IAFG;AAES;AACZ,MAAA,MAAK,EAAL,MAHG,CAGS;;AAHT,KAAP;AAMJ;AAvEW,CAAf","sourcesContent":["<template>\n  <div>\n\n      <button href=\"\"  @click.prevent=\"logout\" class=\"bg-emerald-500 py-3 px block mt-4 lg:inline-block lg:mt-0 text-teal-lighter hover:text-white\">\n        LOGOUT\n      </button>\n\n       Selamat Datang <strong>{{ user.name }}</strong>\n  </div>\n</template>\n\n<script>\nimport { onMounted, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport axios from 'axios'\n\n    export default {\n\n        setup() {\n\n            //state token\n            const token = localStorage.getItem('token')\n\n            //inisialisasi vue router on Composition API\n            const router = useRouter()\n\n            //state user\n            const user = ref('')\n            \n            //mounted properti\n            onMounted(() =>{\n\n                //check Token exist\n                if(!token) {\n                    return router.push({\n                        name: 'login'\n                    })\n                }\n                \n                //get data user\n                axios.defaults.headers.common.Authorization = `Bearer ${token}`\n                axios.get('http://localhost:8000/api/user')\n                .then(response => {\n\n                    //console.log(response.data.name)\n                    user.value = response.data\n\n                })\n                .catch(error => {\n                    console.log(error.response.data)\n                })\n\n            })\n\n            //method logout\n            function logout() {\n\n                //logout\n                axios.defaults.headers.common.Authorization = `Bearer ${token}`\n                axios.post('http://localhost:8000/api/logout')\n                .then(response => {\n\n                    if(response.data.success) {\n\n                        //remove localStorage\n                        localStorage.removeItem('token')\n\n                        //redirect ke halaman login\n                        return router.push({\n                            name: 'login'\n                        })\n\n                    }\n\n                })\n                .catch(error => {\n                    console.log(error.response.data)\n                })\n\n            }\n\n            return {\n                token,      // <-- state token\n                user,       // <-- state user\n                logout      // <-- method logout\n            }\n\n        }\n\n    }\n</script>"],"sourceRoot":""}]}